cargo_flags = --manifest-path chef-lang/Cargo.toml

main: build

check: test lint

test:
	cargo test $(cargo_flags)
	./chef-python/test.py

lint:
	cargo fmt --check $(cargo_flags)
	cargo clippy $(cargo_flags)

build:
	cargo build --release $(cargo_flags)
	cp ./chef-lang/target/release/chef ./chef


sym_install: build
	ln -sf "$(curdir)/chef-mod/chef_0.0.1/" "$(HOME)/.factorio/mods"
	# ln -s "$(pwd)/chef" "/usr/local/bin/chef"
	# pip install -e chef-python

install: build
	cp -v "./chef" "/usr/local/bin"
	pip install chef-python

clean:
	git clean -xdf
