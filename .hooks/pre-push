#!/nix/store/1xhds5s320nfp2022yjah1h7dpv8qqns-bash-5.2p32/bin/bash
# This script was generated by Nix.
# To make changes edit the `jobs.nix` file.

echo "->> Running 'pre-push'"
# Dependencies for pre-push
echo "--->> Running 'update-scripts'"
# Dependencies for update-scripts

# Run update-scripts job
nix run .#gen-scripts

echo "--->> Running 'check-all'"
# Dependencies for check-all
echo "----->> Running 'check-git'"
# Dependencies for check-git

# Run check-git job
git diff --quiet \
    || { echo -e "\nPlease commit your changes."; exit 1; }


echo "----->> Running 'lint-all'"
# Dependencies for lint-all
echo "------->> Running 'lint-fmt'"
# Dependencies for lint-fmt
echo "--------->> Running 'lint-fmt-compiler'"
# Dependencies for lint-fmt-compiler

# Run lint-fmt-compiler job
cargo fmt --check --manifest-path "`git rev-parse --show-toplevel`/chef-compiler/Cargo.toml" \
    || { echo -e "\nPlease format your files in 'chef-compiler'.";  exit 1; }


echo "--------->> Running 'lint-fmt-inspector'"
# Dependencies for lint-fmt-inspector

# Run lint-fmt-inspector job
cargo fmt --check --manifest-path "`git rev-parse --show-toplevel`/chef-inspector/Cargo.toml" \
    || { echo -e "\nPlease format your files in 'chef-inspector'.";  exit 1; }


echo "--------->> Running 'lint-fmt-crate'"
# Dependencies for lint-fmt-crate

# Run lint-fmt-crate job
cargo fmt --check --manifest-path "`git rev-parse --show-toplevel`/factorio-circuit-networks/Cargo.toml" \
    || { echo -e "\nPlease format your files in 'factorio-circuit-networks'.";  exit 1; }


# Run lint-fmt job


echo "------->> Running 'lint-clippy'"
# Dependencies for lint-clippy
echo "--------->> Running 'lint-clippy-compiler'"
# Dependencies for lint-clippy-compiler

# Run lint-clippy-compiler job
cargo clippy --manifest-path "`git rev-parse --show-toplevel`/chef-compiler/Cargo.toml" -- --deny warnings 2> /dev/null \
    || { echo -e "\nClippy is angry in 'chef-compiler'."; exit 1; }


echo "--------->> Running 'lint-clippy-inspector'"
# Dependencies for lint-clippy-inspector

# Run lint-clippy-inspector job
cargo clippy --manifest-path "`git rev-parse --show-toplevel`/chef-inspector/Cargo.toml" -- --deny warnings 2> /dev/null \
    || { echo -e "\nClippy is angry in 'chef-inspector'."; exit 1; }


echo "--------->> Running 'lint-clippy-crate'"
# Dependencies for lint-clippy-crate

# Run lint-clippy-crate job
cargo clippy --manifest-path "`git rev-parse --show-toplevel`/factorio-circuit-networks/Cargo.toml" -- --deny warnings 2> /dev/null \
    || { echo -e "\nClippy is angry in 'factorio-circuit-networks'."; exit 1; }


# Run lint-clippy job


# Run lint-all job


# Run check-all job


echo "--->> Running 'test-all'"
# Dependencies for test-all
echo "----->> Running 'test-compiler'"
# Dependencies for test-compiler

# Run test-compiler job
cargo test --manifest-path "`git rev-parse --show-toplevel`/chef-compiler/Cargo.toml"


echo "----->> Running 'test-inspector'"
# Dependencies for test-inspector

# Run test-inspector job
cargo test --manifest-path "`git rev-parse --show-toplevel`/chef-inspector/Cargo.toml"


echo "----->> Running 'test-crate'"
# Dependencies for test-crate

# Run test-crate job
cargo test --manifest-path "`git rev-parse --show-toplevel`/factorio-circuit-networks/Cargo.toml"


# Run test-all job


# Run pre-push job


