#!/nix/store/1xhds5s320nfp2022yjah1h7dpv8qqns-bash-5.2p32/bin/bash
# This script was generated by Nix.
# To make changes edit the `jobs.nix` file.

echo "->> Running 'pre-push'"
# Dependencies for pre-push
echo "--->> Running 'check-all'"
# Dependencies for check-all
echo "----->> Running 'check-fmt-compiler'"
# Dependencies for check-fmt-compiler

# Run check-fmt-compiler job
cargo fmt --check --manifest-path "./chef-compiler/Cargo.toml" \
    || echo -e "\nPlease format your files in 'chef-compiler'." \
    || exit 1


echo "----->> Running 'check-fmt-inspector'"
# Dependencies for check-fmt-inspector

# Run check-fmt-inspector job
cargo fmt --check --manifest-path "./chef-inspector/Cargo.toml" \
    || echo -e "\nPlease format your files in 'chef-inspector'." \
    || exit 1


echo "----->> Running 'check-clippy-compiler'"
# Dependencies for check-clippy-compiler

# Run check-clippy-compiler job
cargo clippy --manifest-path "./chef-compiler/Cargo.toml" -- --deny warnings 2> /dev/null \
    || echo -e "\nClippy is angry in 'chef-compiler'." \
    || exit 1


echo "----->> Running 'check-clippy-inspector'"
# Dependencies for check-clippy-inspector

# Run check-clippy-inspector job
cargo clippy --manifest-path "./chef-inspector/Cargo.toml" -- --deny warnings 2> /dev/null \
    || echo -e "\nClippy is angry in 'chef-inspector'." \
    || exit 1


# Run check-all job


echo "--->> Running 'test-all'"
# Dependencies for test-all
echo "----->> Running 'test-compiler'"
# Dependencies for test-compiler

# Run test-compiler job
cargo test --manifest-path "./chef-compiler/Cargo.toml"


echo "----->> Running 'test-inspector'"
# Dependencies for test-inspector

# Run test-inspector job
cargo test --manifest-path "./chef-inspector/Cargo.toml"


# Run test-all job


# Run pre-push job


